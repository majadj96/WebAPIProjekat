<!DOCTYPE html>
<html>
<head>
    <title>Flamingo taxi</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="Scripts/jquery-1.10.2.js"></script>

    <style>
        body {
            font: 20px Montserrat, sans-serif;
            line-height: 1.8;
            color: #ef2415;
        }

        p {
            font-size: 16px;
        }

        .margin {
            margin-bottom: 45px;
        }

        .bg-1 {
            background-color: #1abc9c; /* Green */
            color: #ffffff;
        }

        .bg-2 {
            background-color: #474e5d; /* Dark Blue */
            color: #ffffff;
        }

        .bg-3 {
            background-color: #ffffff; /* White */
            color: #555555;
        }

        .bg-4 {
            background-color: #2f2f2f; /* Black Gray */
            color: #fff;
        }

        .container-fluid {
            padding-top: 70px;
            padding-bottom: 70px;
        }

        .navbar {
            padding-top: 15px;
            padding-bottom: 15px;
            border: 0;
            border-radius: 0;
            margin-bottom: 0;
            font-size: 12px;
            letter-spacing: 5px;
        }

        .navbar-nav li a:hover {
            color: #1abc9c !important;
        }

        body {
            background-image: url(flamingo33333.jpg);
            background-repeat: repeat;
        }

      

    </style>
    <script type="text/javascript">
        $(document).ready(function () {


            $("#registracijaDeo").css('display', 'none');


            $("p").click(function () {
                alert($(this).text());
            });
            $("#load-products").click(function () {
                $.get("/api/registracija", function (data, status) {
                    let tableOfProducts = "<table border='1'>";
                    for (korisnik in data) {
                        tableOfProducts += `<tr><td>${data[korisnik].KorisnickoIme}</td><td>${data[korisnik].Lozinka}</td></tr>`;
                    }
                    tableOfProducts += "</table>";
                    $("#content").html(tableOfProducts);
                });
            });

            $("#prijava").click(function () {

                let ki = $('#korIme').val();
                let p = $('#korPass').val();
                if (ki == "" || p == "") {
                    alert("Morate popuniti sva polja!");
                } else {

                    let korisnik = {
                        KorisnickoIme: `${$('#korIme').val()}`,
                        Lozinka: `${$('#korPass').val()}`,
                    };


                    $.ajax({
                        type: 'POST',
                        url: '/api/Prijava',
                        data: JSON.stringify(korisnik),
                        contentType: 'application/json; charset=utf-8',
                        dataType: 'json',
                        success: function (data) {
                            if (data != "Uspesno") {
                                $("#greskaPrijava").html("<p>" + data + "</p>");
                            } else {
                                localStorage.setItem("korisnik", korisnik.KorisnickoIme);
                                $("#greskaPrijava").html("<p>"+" "+"</p>");
                                $(location).attr('href', 'single.html')

                            }
                        }
                    })
                }
            });


            $("#prikazi").click(function () {

                $("#prikazi").hide(1000);
                $("#registracijaDeo").show(1000);



            });



            $("#registracija").click(function () {

                let ki = $('#korImeReg').val();
                let p = $('#korPassReg').val();
                let i = $('#ime').val();
                let pr = $('#prezime').val();
                let j = $('#jmbg').val();
                let e = $('#emailAdr').val();
                let t = $('#brTelefona').val();

                if (ki == "" || p == "" || i == "" || pr == "" || j == "" || e == "" || t == "") {
                    alert("Morate popuniti sva polja!");
                } else {

                    let korisnik = {
                        KorisnickoIme: `${$('#korImeReg').val()}`,
                        Lozinka: `${$('#korPassReg').val()}`,
                        Ime: `${$('#ime').val()}`,
                        Prezime: `${$('#prezime').val()}`,
                        Pol: `${$('#pol').val()}`,
                        JMBG: `${$('#jmbg').val()}`,
                        Email: `${$('#emailAdr').val()}`,
                        KontaktTelefon: `${$('#brTelefona').val()}`,
                    };


                    $.ajax({
                        type: 'POST',
                        url: '/api/Registracija',
                        data: JSON.stringify(korisnik),
                        contentType: 'application/json; charset=utf-8',
                        dataType: 'json',
                        success: function (data) {
                            if (!data) {
                                $("#greska").css("color", "red");
                                // $("#greska").text("Postoji korisnik sa tim username-om");
                                $("#korImeReg").focus();
                                alert("Korisnicko ime je zauzeto");
                            }
                            else {
                                $("#greska").text("");
                                $("#prikazi").show();
                                $("#registracijaDeo").hide(1000);
                            }

                        }
                    })
                }
            });




        });


    </script>
</head>
<body>

    <nav class="navbar navbar-default">
        <div class="container">
            <div class="navbar-header">
            </div>

            <div class="collapse navbar-collapse" id="myNavbar">

                <ul class="nav navbar-nav navbar-right"></ul>
            </div>
            <h3>Flamingo TAXI</h3>

        </div>
    </nav>
   
    <div id="prijavaDeo" style="width:800px; margin:0 auto;">

        <h2> Prijava :)</h2>


        <table>
            <tr>
                <td>Ime: </td>
                <td><input id="korIme" type="text" name="KorisnickoIme" /></td>
            </tr>
            <tr>
                <td>Lozinka: </td>
                <td><input id="korPass" type="password" name="Lozinka" /></td>
            </tr>
            <tr><td><br /> </td><td></td></tr>
            <tr>
                <td></td>
                <td>  <button id="prikazi" type="button">Nemas nalog?</button>  <button id="prijava" type="button">Prijavi se</button></td>
            </tr>

        </table>


        <div id="greskaPrijava"></div>


    </div>
    <br />
    <div id="registracijaDeo" style="width:800px; margin:0 auto;">
        <h2> Registracija :)</h2>


        <table>
            <tr>
                <td>Korisnicko ime: </td>
                <td>
                    <input id="korImeReg" type="text" name="KorisnickoIme" />
                </td>


            </tr>
            <tr>
                <td>Lozinka: </td>
                <td><input id="korPassReg" type="password" name="Lozinka" /></td>
            </tr>

            <tr>
                <td>Ime: </td>
                <td><input id="ime" type="text" name="Ime" /></td>
            </tr>

            <tr>
                <td>Prezime: </td>
                <td><input id="prezime" type="text" name="Prezime" /></td>
            </tr>


            <tr>
                <td>JMBG: </td>
                <td><input id="jmbg" type="text" name="JMBG" /></td>
            </tr>

            <tr>
                <td>Pol: </td>
                <td>
                    <select name="Pol" id="pol">
                        <option>
                            Zenski
                        </option>
                        <option>
                            Muski
                        </option>
                    </select>
                </td>
            </tr>

            <tr>
                <td>Broj telefona: </td>
                <td><input id="brTelefona" type="text" name="KontaktTelefon" /></td>
            </tr>

            <tr>
                <td>Email adresa:</td>
                <td><input id="emailAdr" type="email" name="Email" /></td>
            </tr>
            <tr><td><br /></td></tr>
            <tr>
                <td></td>
                <td align="right"> <button id="registracija" type="button">Registruj se</button></td>
            </tr>

        </table>


        <p id="greska"></p>
    </div>


</body>
</html>
